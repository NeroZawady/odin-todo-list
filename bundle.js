(()=>{"use strict";var t={d:(e,o)=>{for(var s in o)t.o(o,s)&&!t.o(e,s)&&Object.defineProperty(e,s,{enumerable:!0,get:o[s]})},o:(t,e)=>Object.prototype.hasOwnProperty.call(t,e)};t.d({},{a:()=>d});class e{#t;#e;#o;#s;#r;#i;#d;constructor(t,e,o,s,r,i){this.#t=t,this.#o=e,this.#s=o,this.#r=s,this.#i=r,this.#d=i,this.createTodoElement(),this.addEvents(),localStorage.setItem("project"+this.#t.getProject().getProjectNumber()+"-todo"+this.#o,JSON.stringify({todoNumber:this.#o,todoName:this.#s,todoDescription:this.#r,todoDueDate:this.#i,todoPriority:this.#d}))}createTodoElement(){this.#e=d("div",null,["todo"]);let t=d("button","&#x2713",["todo__complete-todo-button"]),e=d("div",this.#s,["todo__name"]),o=d("div",this.#r,["todo__description"]),s=d("div",this.#i,["todo__due-date"]),r=d("div",this.#d,["todo__priority"]),i=d("button","Edit",["todo__edit-todo-button"]);this.#e.append(t,e,o,s,r,i),this.#t.getTodoListElement().append(this.#e)}addEvents(){this.#e.children[0].addEventListener("click",(()=>{this.#t.getNumberOfTodos()===this.#o+1&&localStorage.removeItem("project"+this.#t.getProject().getProjectNumber()+"-todo"+this.#o),this.#e.remove(),this.#t.removeTodo(this.#o)}));let t=document.querySelector(".todo__edit-todo-button"),e=document.querySelector(".todos-section .modal .edit-todo-form").parentElement;t.addEventListener("click",(()=>{e.classList.toggle("hidden"),document.querySelector(".edit-todo-form #name").focus(),document.querySelector('.edit-todo-form input[name="todoNumber"]').value=this.#o}))}setTodoNumber(t){this.#t.getNumberOfTodos()===this.#o&&localStorage.removeItem("project"+this.#t.getProject().getProjectNumber()+"-todo"+this.#o),this.#o=t,localStorage.setItem("project"+this.#t.getProject().getProjectNumber()+"-todo"+this.#o,JSON.stringify({todoNumber:this.#o,todoName:this.#s,todoDescription:this.#r,todoDueDate:this.#i,todoPriority:this.#d}))}editTodo(t,e,o,s){this.#s=t,this.#r=e,this.#i=o,this.#d=s,localStorage.setItem("project"+this.#t.getProject().getProjectNumber()+"-todo"+this.#o,JSON.stringify({todoNumber:this.#o,todoName:this.#s,todoDescription:this.#r,todoDueDate:this.#i,todoPriority:this.#d})),this.#e.children[1].innerHTML=this.#s,this.#e.children[2].innerHTML=this.#r,this.#e.children[3].innerHTML=this.#i,this.#e.children[4].innerHTML=this.#d}}class o{#c;#n;#l;constructor(t){this.#c=t,this.createTodoListElement();let e=JSON.parse(localStorage.getItem("project"+this.#c.getProjectNumber()+"-numberOfTodos"));null===e?this.#m():this.#a(e)}#m(){this.#l=[]}#a(t){let o;this.#l=[];for(let s=0;s<t;s++)o=JSON.parse(localStorage.getItem("project"+this.#c.getProjectNumber()+"-todo"+s)),this.#l.push(new e(this,o.todoNumber,o.todoName,o.todoDescription,o.todoDueDate,o.todoPriority))}createTodoListElement(){let t=document.querySelector(".todo-lists");0===this.#c.getProjectNumber()?this.#n=d("div",null,["todo-lists__project-todo-list"]):this.#n=d("div",null,["todo-lists__project-todo-list","hidden"]),t.append(this.#n)}addTodo(t,o,s,r){this.#l.push(new e(this,this.#l.length,t,o,s,r)),localStorage.setItem("project"+this.#c.getProjectNumber()+"-numberOfTodos",JSON.stringify(this.#l.length))}getProject(){return this.#c}getNumberOfTodos(){return this.#l.length}getTodoListElement(){return this.#n}deselectTodoList(){this.#n.classList.toggle("hidden")}selectTodoList(){this.#n.classList.toggle("hidden")}removeTodoList(){for(let t=0;t<this.#l.length;t++)localStorage.removeItem("project"+this.#c.getProjectNumber()+"-todo"+t);localStorage.removeItem("project"+this.#c.getProjectNumber()+"-numberOfTodos")}removeTodo(t){this.#l.splice(t,1);for(let e=t;e<this.#l.length;e++)this.#l[e].setTodoNumber(e);localStorage.setItem("project"+this.#c.getProjectNumber()+"-numberOfTodos",JSON.stringify(this.#l.length))}setProjectNumber(t){let e;this.#c.getProjectsList().getNumberOfProjects()===t+1&&localStorage.removeItem("project"+(t+1)+"-numberOfTodos"),localStorage.setItem("project"+t+"-numberOfTodos",JSON.stringify(this.#l.length));for(let o=0;o<this.#l.length;o++)e=JSON.parse(localStorage.getItem("project"+(t+1)+"-todo"+o)),localStorage.setItem("project"+t+"-todo"+o,JSON.stringify(e)),this.#c.getProjectsList().getNumberOfProjects()===t+1&&localStorage.removeItem("project"+(t+1)+"-todo"+o)}getTodo(t){return this.#l[t]}}class s{#h;#j;#t;constructor(t){this.#h=t,this.createProjectElement(),this.#t=new o(this),this.#p()}getTodoList(){return this.#t}createProjectElement(){let t=d("div",null,["projects-list__project","project--selected"]),e=d("button","X",["projects-list__delete-project-button","button--disabled"]),o=d("button","Default",["projects-list__project-name"]);t.append(e),t.append(o),this.#h.getProjectsListElement().append(t),this.#j=t}#p(){this.#j.children[1].addEventListener("click",(()=>{this.#h.setSelectedProject(this)}))}selectProject(){this.#j.classList.toggle("project--selected"),this.#t.selectTodoList()}deselectProject(){this.#j.classList.toggle("project--selected"),this.#t.deselectTodoList()}getProjectNumber(){return 0}}class r{#h;#j;#u;#g;#t;constructor(t,e,s){this.#h=t,this.#u=e,this.#g=s,this.createProjectElement(),this.#t=new o(this),this.#p(),localStorage.setItem("project"+this.#u,JSON.stringify({projectNumber:this.#u,projectName:this.#g}))}getTodoList(){return this.#t}createProjectElement(){let t=d("div",null,["projects-list__project"]),e=d("button","X",["projects-list__delete-project-button"]),o=d("button",this.#g,["projects-list__project-name"]);t.append(e),t.append(o),this.#h.getProjectsListElement().append(t),this.#j=t}#p(){this.#j.children[1].addEventListener("click",(()=>{this.#h.setSelectedProject(this)})),this.#j.children[0].addEventListener("click",(()=>{this.#h.getNumberOfProjects()===this.#u+1&&localStorage.removeItem("project"+this.#u),this.#j.remove(),this.#t.getTodoListElement().remove(),this.#t.removeTodoList(),this.#h.removeProject(this.#u)}))}selectProject(){this.#j.classList.toggle("project--selected"),this.#t.selectTodoList()}deselectProject(){this.#j.classList.toggle("project--selected"),this.#t.deselectTodoList()}setProjectNumber(t){this.#h.getNumberOfProjects()===this.#u&&localStorage.removeItem("project"+this.#u),this.#u=t,localStorage.setItem("project"+this.#u,JSON.stringify({projectNumber:this.#u,projectName:this.#g}))}getProjectNumber(){return this.#u}getProjectsList(){return this.#h}}let i=new class{#L;#N;#b;constructor(){this.#L=document.querySelector(".projects-list");let t=JSON.parse(localStorage.getItem("numberOfProjects"));null===t?this.#m():this.#a(t)}#m(){this.#N=[new s(this)],this.#b=this.#N[0],localStorage.setItem("numberOfProjects",JSON.stringify(this.#N.length))}#a(t){let e;this.#N=[new s(this)],this.#b=this.#N[0];for(let o=1;o<t;o++)e=JSON.parse(localStorage.getItem("project"+o)),this.#N.push(new r(this,e.projectNumber,e.projectName))}getProjectsListElement(){return this.#L}addProject(t){this.#N.push(new r(this,this.#N.length,t)),localStorage.setItem("numberOfProjects",JSON.stringify(this.#N.length))}setSelectedProject(t){this.#b.deselectProject(),this.#b=t,this.#b.selectProject()}getSelectedProject(){return this.#b}removeProject(t){this.#b.getProjectNumber()===t&&this.setSelectedProject(this.#N[0]),this.#N.splice(t,1);for(let e=t;e<this.#N.length;e++)this.#N[e].setProjectNumber(e),this.#N[e].getTodoList().setProjectNumber(e);localStorage.setItem("numberOfProjects",JSON.stringify(this.#N.length))}getNumberOfProjects(){return this.#N.length}};function d(t,e,o){let s=document.createElement(t);if(null!==e&&(s.innerHTML=e),null!==o)for(let t of o)s.classList.add(t);return s}!function(){let t=document.querySelector(".projects-section__add-project-button"),e=document.querySelector(".projects-section .modal"),o=document.querySelector(".add-project-form"),s=document.querySelector(".add-project-form__cancel"),r=document.querySelector(".add-project-form input");t.addEventListener("click",(()=>{e.classList.toggle("hidden"),r.focus()})),e.addEventListener("click",(()=>{e.classList.toggle("hidden"),o.reset()})),o.addEventListener("submit",(()=>{event.preventDefault();let t=new FormData(o);e.classList.toggle("hidden"),i.addProject(t.get("name")),o.reset()})),o.addEventListener("click",(()=>{event.stopPropagation()})),s.addEventListener("click",(()=>{e.classList.toggle("hidden")}));let d=document.querySelector(".todos-section__add-todo-button"),c=document.querySelector(".todos-section .modal .add-todo-form").parentElement,n=document.querySelector(".add-todo-form"),l=document.querySelector(".add-todo-form__cancel");d.addEventListener("click",(()=>{c.classList.toggle("hidden"),document.querySelector(".add-todo-form #name").focus()})),c.addEventListener("click",(()=>{c.classList.toggle("hidden"),n.reset()})),n.addEventListener("submit",(()=>{event.preventDefault();let t=new FormData(n);c.classList.toggle("hidden"),i.getSelectedProject().getTodoList().addTodo(t.get("name"),t.get("description"),t.get("dueDate"),t.get("priority")),n.reset(),event.preventDefault()})),n.addEventListener("click",(()=>{event.stopPropagation()})),l.addEventListener("click",(()=>{c.classList.toggle("hidden")})),document.querySelector(".todo__edit-todo-button");let m=document.querySelector(".todos-section .modal .edit-todo-form").parentElement,a=document.querySelector(".todos-section .modal .edit-todo-form"),h=a.querySelector(".edit-todo-form__cancel");m.addEventListener("click",(()=>{m.classList.toggle("hidden"),a.reset()})),a.addEventListener("submit",(()=>{event.preventDefault();let t=new FormData(a);m.classList.toggle("hidden"),i.getSelectedProject().getTodoList().getTodo(t.get("todoNumber")).editTodo(t.get("name"),t.get("description"),t.get("dueDate"),t.get("priority")),a.reset(),event.preventDefault()})),a.addEventListener("click",(()=>{event.stopPropagation()})),h.addEventListener("click",(()=>{m.classList.toggle("hidden")})),window.addEventListener("keyup",(t=>{"Escape"===t.code&&(e.classList.contains("hidden")?c.classList.contains("hidden")?m.classList.contains("hidden")||(m.classList.toggle("hidden"),a.reset()):(c.classList.toggle("hidden"),n.reset()):(e.classList.toggle("hidden"),o.reset()))}))}()})();